<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>SuperLUDistributed: SRC/get_perm_c_parmetis.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Types</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>SRC/get_perm_c_parmetis.c File Reference</h1>Gets matrix permutation. <a href="#_details">More...</a>
<p>
<code>#include &lt;limits.h&gt;</code><br>
<code>#include &lt;math.h&gt;</code><br>
<code>#include &quot;<a class="el" href="superlu__ddefs_8h-source.html">superlu_ddefs.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions/Subroutines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__perm__c__parmetis_8c.html#239375e3f230d2bfc8dcabc847c63252">a_plus_at_CompRow_loc</a> (int iam,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *perm_r,int nprocs_i,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *vtxdist_i,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> n,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *rowptr,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *colind,int nprocs_o,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *vtxdist_o,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *p_bnz,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **p_b_rowptr,<a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **p_b_colind,<a class="el" href="typegridinfo__t.html">gridinfo_t</a> *grid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="get__perm__c__parmetis_8c.html#3619fbfb31f41802d07339f7c1f4f6e1">get_perm_c_parmetis</a> (<a class="el" href="typeSuperMatrix.html">SuperMatrix</a> *A, <a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *perm_r, <a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *perm_c, int nprocs_i, int noDomains, <a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **sizes, <a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **fstVtxSep, <a class="el" href="typegridinfo__t.html">gridinfo_t</a> *grid, MPI_Comm *metis_comm)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<pre>
 -- Distributed symbolic factorization auxialiary routine  (version 2.1) --
 Lawrence Berkeley National Lab, Univ. of California Berkeley - July 2003
 INRIA France - January 2004
 Laura Grigori</pre><p>
<pre> November 1, 2007
 </pre> <hr><h2>Function Documentation</h2>
<a class="anchor" name="239375e3f230d2bfc8dcabc847c63252"></a><!-- doxytag: member="get_perm_c_parmetis.c::a_plus_at_CompRow_loc" ref="239375e3f230d2bfc8dcabc847c63252" args="(int iam,int_t *perm_r,int nprocs_i,int_t *vtxdist_i,int_t n,int_t *rowptr,int_t *colind,int nprocs_o,int_t *vtxdist_o,int_t *p_bnz,int_t **p_b_rowptr,int_t **p_b_colind,gridinfo_t *grid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static float a_plus_at_CompRow_loc           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>iam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>perm_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nprocs_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>vtxdist_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a>&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rowptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>colind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nprocs_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>vtxdist_o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>p_bnz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **&nbsp;</td>
          <td class="paramname"> <em>p_b_rowptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **&nbsp;</td>
          <td class="paramname"> <em>p_b_colind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="typegridinfo__t.html">gridinfo_t</a> *&nbsp;</td>
          <td class="paramname"> <em>grid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<pre>
 Purpose
 =======</pre><p>
<pre> Form the structure of Pr*A +A'Pr'. A is an n-by-n matrix in
 <a class="el" href="typeNRformat__loc.html">NRformat_loc</a> format, represented by (rowptr, colind). The output
 B=Pr*A +A'Pr' is in <a class="el" href="typeNRformat__loc.html">NRformat_loc</a> format (symmetrically, also row
 oriented), represented by (b_rowptr, b_colind).</pre><p>
<pre> The input matrix A is distributed in block row format on nprocs_i
 processors.  The output matrix B is distributed in block row format
 on nprocs_o processors, where nprocs_o &lt;= nprocs_i.  On output, the
 matrix B has its rows permuted according to perm_r.</pre><p>
<pre> Sketch of the algorithm
 =======================</pre><p>
<pre> Let iam by my process number.  Let fst_row, lst_row = m_loc +
 fst_row be the first/last row stored on iam.</pre><p>
<pre> Compute Pr' - the inverse row permutation, stored in iperm_r.</pre><p>
<pre> Compute the transpose  of the block row of Pr*A that iam owns:
    T[:,Pr(fst_row:lst_row)] = Pr' * A[:,fst_row:lst_row] * Pr'</pre><p>
<pre> All to all communication such that every processor iam receives all
 the blocks of the transpose matrix that it needs, that is
           T[fst_row:lst_row, :]</pre><p>
<pre> Compute B = A[fst_row:lst_row, :] + T[fst_row:lst_row, :]</pre><p>
<pre> If Pr != I or nprocs_i != nprocs_o then permute the rows of B (that
 is compute Pr*B) and redistribute from nprocs_i to nprocs_o
 according to the block row distribution in vtxdist_i, vtxdist_o.
 </pre> 
</div>
</div><p>
<a class="anchor" name="3619fbfb31f41802d07339f7c1f4f6e1"></a><!-- doxytag: member="get_perm_c_parmetis.c::get_perm_c_parmetis" ref="3619fbfb31f41802d07339f7c1f4f6e1" args="(SuperMatrix *A, int_t *perm_r, int_t *perm_c, int nprocs_i, int noDomains, int_t **sizes, int_t **fstVtxSep, gridinfo_t *grid, MPI_Comm *metis_comm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_perm_c_parmetis           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="typeSuperMatrix.html">SuperMatrix</a> *&nbsp;</td>
          <td class="paramname"> <em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>perm_r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> *&nbsp;</td>
          <td class="paramname"> <em>perm_c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nprocs_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>noDomains</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **&nbsp;</td>
          <td class="paramname"> <em>sizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="superlu__defs_8h.html#b6fd6105e64ed14a0c9281326f05e623">int_t</a> **&nbsp;</td>
          <td class="paramname"> <em>fstVtxSep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="typegridinfo__t.html">gridinfo_t</a> *&nbsp;</td>
          <td class="paramname"> <em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI_Comm *&nbsp;</td>
          <td class="paramname"> <em>metis_comm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<pre>
 Purpose
 =======</pre><p>
<pre> GET_PERM_C_PARMETIS obtains a permutation matrix Pc, by applying a
 graph partitioning algorithm to the symmetrized graph A+A'.  The
 multilevel graph partitioning algorithm used is the
 ParMETIS_V3_NodeND routine available in the parallel graph
 partitioning package parMETIS.</pre><p>
<pre> The number of independent sub-domains noDomains computed by this
 algorithm has to be a power of 2.  Hence noDomains is the larger
 number power of 2 that is smaller than nprocs_i, where nprocs_i = nprow
 * npcol is the number of processors used in SuperLU_DIST.</pre><p>
<pre> Arguments
 =========</pre><p>
<pre> A       (input) SuperMatrix*
         Matrix A in A*X=B, of dimension (A-&gt;nrow, A-&gt;ncol). The number
         of the linear equations is A-&gt;nrow.  Matrix A is distributed
         in <a class="el" href="typeNRformat__loc.html">NRformat_loc</a> format.</pre><p>
<pre> perm_r  (input) int_t*
         Row permutation vector of size A-&gt;nrow, which defines the 
         permutation matrix Pr; perm_r[i] = j means row i of A is in 
         position j in Pr*A.</pre><p>
<pre> perm_c  (output) int_t*
	   Column permutation vector of size A-&gt;ncol, which defines the 
         permutation matrix Pc; perm_c[i] = j means column i of A is 
         in position j in A*Pc.</pre><p>
<pre> nprocs_i (input) int*
         Number of processors the input matrix is distributed on in a block
         row format.  It corresponds to number of processors used in
         SuperLU_DIST.</pre><p>
<pre> noDomains (input) int*, must be power of 2
         Number of independent domains to be computed by the graph
         partitioning algorithm.  ( noDomains &lt;= nprocs_i )</pre><p>
<pre> sizes   (output) int_t**, of size 2 * noDomains
         Returns pointer to an array containing the number of nodes
         for each sub-domain and each separator.  Separators are stored 
         from left to right.
         Memory for the array is allocated in this routine.</pre><p>
<pre> fstVtxSep (output) int_t**, of size 2 * noDomains
         Returns pointer to an array containing first node for each
         sub-domain and each separator.
         Memory for the array is allocated in this routine.</pre><p>
<pre> Return value
 ============
   &lt; 0, number of bytes allocated on return from the symbolic factorization.
   &gt; 0, number of bytes allocated when out of memory.
 </pre> 
</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Aug 30 14:36:33 2011 for SuperLUDistributed by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
